# å³é”®èœå•åŠŸèƒ½æµ‹è¯•æŒ‡å—

## âœ… ç¼–è¯‘æˆåŠŸ
åº”ç”¨å·²æˆåŠŸç¼–è¯‘å¹¶å¯åŠ¨åœ¨ http://localhost

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### 1. **æ•°æ®åº“è¿ç§»**ï¼ˆéœ€å…ˆæ‰§è¡Œï¼‰
åœ¨Supabaseä¸­æ‰§è¡Œä»¥ä¸‹SQLï¼š
```sql
-- æ·»åŠ  arcane_dust å­—æ®µï¼ˆå¥¥æœ¯ä¹‹å°˜ï¼‰
ALTER TABLE user_account ADD COLUMN IF NOT EXISTS arcane_dust integer NOT NULL DEFAULT 0;

-- æ·»åŠ  match_rating å­—æ®µï¼ˆåŒ¹é…åˆ†ï¼‰
ALTER TABLE user_account ADD COLUMN IF NOT EXISTS match_rating integer NOT NULL DEFAULT 1000;
```

æˆ–è€…æ‰§è¡Œè¿ç§»è„šæœ¬ï¼š
```bash
# åœ¨Supabase SQLç¼–è¾‘å™¨ä¸­è¿è¡Œ
src/main/sql/user_account_migration.sql
```

### 2. **æµ‹è¯•æ­¥éª¤**

#### æµ‹è¯•å³é”®åˆ é™¤å¡ç‰Œï¼ˆæˆ‘çš„å¡ç»„ï¼‰
1. è®¿é—® http://localhost
2. ç™»å½•è´¦å·
3. è¿›å…¥"æˆ‘çš„å¡ç»„"æ ‡ç­¾
4. **å³é”®ç‚¹å‡»**å¡ç»„ä¸­çš„ä»»æ„å¡ç‰Œ
5. é€‰æ‹©"ä»å¡ç»„ä¸­åˆ é™¤"

#### æµ‹è¯•å³é”®åˆ†è§£å¡ç‰Œï¼ˆæˆ‘çš„æ”¶è—ï¼‰
1. è¿›å…¥"æˆ‘çš„æ”¶è—"æ ‡ç­¾
2. **å³é”®ç‚¹å‡»**æ•°é‡>3çš„å¡ç‰Œ
3. ä¼šçœ‹åˆ°èœå•é¡¹ï¼š"åˆ†è§£å¤šä½™å¡ç‰Œ (Ã—N, +XXXğŸŒŸ)"
4. ç‚¹å‡»åç¡®è®¤åˆ†è§£
5. åˆ†è§£æˆåŠŸåï¼š
   - å¡ç‰Œæ•°é‡å‡å°‘åˆ°3å¼ 
   - å¥¥æœ¯ä¹‹å°˜å¢åŠ 
   - é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå½“å‰å¥¥æœ¯ä¹‹å°˜æ€»æ•°

#### æµ‹è¯•åˆ†è§£é™åˆ¶
1. å³é”®ç‚¹å‡»æ•°é‡â‰¤3çš„å¡ç‰Œ
2. ä¼šçœ‹åˆ°ç°è‰²èœå•ï¼š"æ•°é‡ä¸è¶³3å¼ ï¼Œæ— æ³•åˆ†è§£"ï¼ˆä¸å¯ç‚¹å‡»ï¼‰

### 3. **ç¨€æœ‰åº¦å¯¹åº”çš„å¥¥æœ¯ä¹‹å°˜**

| ç¨€æœ‰åº¦ | æ¯å¼ åˆ†è§£è·å¾— |
|--------|--------------|
| é“œå¡ (BRONZE) | 50 ğŸŒŸ |
| é“¶å¡ (SILVER) | 200 ğŸŒŸ |
| é‡‘å¡ (GOLD) | 800 ğŸŒŸ |
| å½©å¡ (RAINBOW) | 1600 ğŸŒŸ |
| ä¼ è¯´å¡ (LEGENDARY) | 2400 ğŸŒŸ |

### 4. **ç•Œé¢æ˜¾ç¤º**

- **å¡åŒ…æŠ½å¥–é¡µé¢**ï¼šæ˜¾ç¤º"å¥¥æœ¯ä¹‹å°˜ï¼šXXX ğŸŒŸ"ï¼ˆé»„è‰²æ–‡å­—ï¼‰
- **å³é”®èœå•**ï¼š
  - å›¾æ ‡ï¼šâœ¨
  - æ˜¾ç¤ºåˆ†è§£æ•°é‡å’Œè·å¾—çš„å¥¥æœ¯ä¹‹å°˜
  - è‡ªåŠ¨è®¡ç®—ï¼š(å½“å‰æ•°é‡ - 3) Ã— ç¨€æœ‰åº¦ä»·å€¼

### 5. **æ³¨æ„äº‹é¡¹**

- åˆ†è§£åå¡ç‰Œæ•°é‡ä¼šç«‹å³æ›´æ–°
- åˆ†è§£å‰ä¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
- åªèƒ½åˆ†è§£æ•°é‡>3çš„å¡ç‰Œï¼Œä¿ç•™åŸºç¡€3å¼ 
- å³é”®èœå•ä¼šè‡ªåŠ¨è°ƒæ•´ä½ç½®ï¼Œé˜²æ­¢æº¢å‡ºå±å¹•

### 6. **æœªæ¥æ‰©å±•ï¼šåŒ¹é…åˆ†ç³»ç»Ÿ**

æ•°æ®åº“å·²æ·»åŠ  `match_rating` å­—æ®µï¼ˆé»˜è®¤1000åˆ†ï¼‰ï¼Œå¯ç”¨äºï¼š
- å¯¹æˆ˜ç»“ç®—æ—¶åŠ å‡åˆ†æ•°
- åˆ†å·®è¶Šå¤§ï¼ŒåŠ /å‡çš„åˆ†æ•°è¶Šå¤š
- ä¸¤ä¸ªç©å®¶åŠ åˆ†/å‡åˆ†çš„ç»å¯¹å€¼ç›¸åŒï¼ˆé›¶å’Œç³»ç»Ÿï¼‰

## ğŸ› å·²ä¿®å¤çš„é—®é¢˜

1. âœ… ç§»é™¤äº† `AuthController.java` çš„BOMå­—ç¬¦
2. âœ… ä¿®æ­£äº† `CardRarity` çš„importè·¯å¾„ï¼ˆä» `card.entity` æ”¹ä¸º `constant`ï¼‰
3. âœ… ç¼–è¯‘æˆåŠŸï¼Œåº”ç”¨æ­£å¸¸å¯åŠ¨

## ğŸ“ å®ç°æ–‡ä»¶æ¸…å•

### åç«¯
- `UserAccount.java` - æ·»åŠ  arcaneDust å’Œ matchRating å­—æ®µ
- `UserCollectionController.java` - æ–°å¢ `/api/user/disenchant` æ¥å£
- `UserCardCollectionService.java` - æ–°å¢ removeCards æ–¹æ³•
- `AuthResponse.java` - è¿”å› arcaneDust å’Œ matchRating
- `CollectionOverviewResponse.java` - è¿”å› arcaneDust

### å‰ç«¯
- `context-menu.js` - è½»é‡çº§å³é”®èœå•ç»„ä»¶
- `deck-edit.js` - å¡ç»„å³é”®åˆ é™¤åŠŸèƒ½
- `collection.js` - æ”¶è—å³é”®åˆ†è§£åŠŸèƒ½ + å¥¥æœ¯ä¹‹å°˜æ˜¾ç¤º
- `index.html` - æ·»åŠ å¥¥æœ¯ä¹‹å°˜UIæ˜¾ç¤º

### æ•°æ®åº“
- `user_account.sql` - å»ºè¡¨è¯­å¥ï¼ˆåŒ…å«æ–°å­—æ®µï¼‰
- `user_account_migration.sql` - è¿ç§»è„šæœ¬ï¼ˆä¸ºå·²æœ‰è¡¨æ·»åŠ å­—æ®µï¼‰

---
**å¼€å‘å®Œæˆæ—¶é—´**: 2025-11-07  
**åº”ç”¨ç«¯å£**: http://localhost
